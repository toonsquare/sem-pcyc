name: DVC Push test
on: workflow_dispatch
jobs:
  jobs1:
    name: push test
    runs-on: self-hosted
    steps:
        - uses: actions/checkout@v2
        - uses: iterative/setup-dvc@v1
        - name: dvc push dataset and files
          env:
             AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
             AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          run: |
            cd ~
            source activate pytorch_p36
            conda activate DVC
            cp /home/ubuntu/dvctest.txt /home/ubuntu/projects_jonathan/sem-pcyc/DVC/dvctest.txt
            cd /home/ubuntu/projects_jonathan/sem-pcyc/DVC/
            dvc add dvctest.txt
            git add dvctest.txt.dvc .gitignore
            git commit -m "github action dvc test"
            git push
            dvc push
            echo "push test done"
            
            
